---
title: Deploy on Render
---
使用基础设施即代码在 Render 上部署 OpenClaw。随附的 `render.yaml` 蓝图以声明式方式定义了您的整个堆栈：服务、磁盘、环境变量，让您只需单击即可完成部署，并将基础架构版本与代码同步管理。

## 先决条件

- 一个 [Render 账户](https://render.com)（提供免费层级）
- 来自您首选 [模型提供商](/providers) 的 API 密钥

## 使用 Render 蓝图进行部署

<a href="__URL_28__ target="_blank" rel="noreferrer">部署到 Render</a>

点击此链接将：

1. 从本仓库根目录中的 `render.yaml` 蓝图创建一个新的 Render 服务。
2. 提示您设置 `SETUP_PASSWORD`
3. 构建 Docker 镜像并部署

部署完成后，您的服务 URL 将遵循 `https://<service-name>.onrender.com` 的模式。

## 理解蓝图

Render 蓝图是定义基础架构的 YAML 文件。本仓库中的 `render.yaml` 配置了运行 OpenClaw 所需的一切：

```yaml
services:
  - type: web
    name: openclaw
    runtime: docker
    plan: starter
    healthCheckPath: /health
    envVars:
      - key: PORT
        value: "8080"
      - key: SETUP_PASSWORD
        sync: false          # prompts during deploy
      - key: OPENCLAW_STATE_DIR
        value: /data/.openclaw
      - key: OPENCLAW_WORKSPACE_DIR
        value: /data/workspace
      - key: OPENCLAW_GATEWAY_TOKEN
        generateValue: true  # auto-generates a secure token
    disk:
      name: openclaw-data
      mountPath: /data
      sizeGB: 1
```

所使用的关键蓝图功能：

| 功能 | 目的 |
|---------|---------|
| `runtime: docker` | 根据仓库的 Dockerfile 进行构建 |
| `healthCheckPath` | Render 监控 `/health` 并重启不健康的实例 |
| `sync: false` | 在部署时提示输入值（密钥） |
| `generateValue: true` | 自动生成加密安全的值 |
| `disk` | 持久化存储可在重新部署后保留 |

## 选择方案

| 方案 | 自动休眠 | 磁盘 | 最适合 |
|------|-----------|------|----------|
| 免费 | 空闲 15 分钟后 | 不可用 | 测试、演示 |
| 初学者 | 从不 | 1GB+ | 个人使用、小型团队 |
| 标准+ | 从不 | 1GB+ | 生产环境、多渠道 |

蓝图默认为 `starter`。要使用免费层级，请在您的分叉副本中更改 `plan: free` 的 `render.yaml`（但请注意：由于没有持久化磁盘，每次部署时配置都会重置）。

## 部署后

### 完成设置向导

1. 导航到 `https://<your-service>.onrender.com/setup`
2. 输入您的 `SETUP_PASSWORD`
3. 选择模型提供商并粘贴您的 API 密钥
4. 可选地配置消息通道（Telegram、Discord、Slack）
5. 单击“运行设置”

### 访问控制 UI

Web 仪表板可在 `https://<your-service>.onrender.com/openclaw` 处访问。

## Render 仪表板功能

### 日志

在“仪表板 → 您的服务 → 日志”中查看实时日志。可按以下内容过滤：
- 构建日志（Docker 镜像创建）
- 部署日志（服务启动）
- 运行时日志（应用程序输出）

### Shell 访问

如需调试，可通过“仪表板 → 您的服务 → Shell”打开一个 shell 会话。持久化磁盘挂载在 `/data`。

### 环境变量

在“仪表板 → 您的服务 → 环境”中修改变量。更改会触发自动重新部署。

### 自动部署

如果您使用的是原始 OpenClaw 仓库，Render 不会自动部署您的 OpenClaw。要更新它，需从仪表板手动执行蓝图同步。

## 自定义域名

1. 转到“仪表板 → 您的服务 → 设置 → 自定义域名”
2. 添加您的域名
3. 按照说明配置 DNS（CNAME 至 `*.onrender.com`）
4. Render 会自动颁发 TLS 证书

## 扩展

Render 支持水平和垂直扩展：

- **垂直**：通过更改方案获得更多 CPU/RAM
- **水平**：增加实例数量（Standard 方案及以上）

对于 OpenClaw，通常垂直扩展就已足够。水平扩展需要使用粘性会话或外部状态管理。

## 备份和迁移

您可以随时导出配置和工作区：

```
https://<your-service>.onrender.com/setup/export
```

这会下载一个便携式备份，您可以在任何 OpenClaw 主机上恢复。

## 故障排除

### 服务无法启动

检查 Render 仪表板中的部署日志。常见问题：

- 缺少 `SETUP_PASSWORD` — 蓝图会提示输入此值，但请确认已正确设置
- 端口不匹配 — 确保 `PORT=8080` 与 Dockerfile 中暴露的端口一致

### 冷启动缓慢（免费层级）

免费层级的服务在空闲 15 分钟后会休眠。休眠后的首次请求需要几秒钟来启动容器。升级到 Starter 方案可实现始终在线。

### 重新部署后数据丢失

这种情况发生在免费层级（无持久化磁盘）。请升级到付费方案，或定期通过 `/setup/export` 导出您的配置。

### 健康检查失败

Render 期望在 30 秒内从 `/health` 收到 200 响应。如果构建成功但部署失败，可能是服务启动时间过长。请检查：
- 构建日志中是否有错误
- 容器是否能在本地使用 `docker build && docker run` 正常运行
